import input_fun
import json
import copy

job = 240
machine = 13
job2 = 513
machine2 = 89
Machine_dict = {0: '514', 1: '515', 2: '905', 3: '916', 4: '907', 5: '908', 6: '815', 7: '509', 8: '603', 9: '613',
                10: '704', 11: '115', 12: '116', 13: '117', 14: '118', 15: '119', 16: '712', 17: '816', 18: '1013',
                19: '1014', 20: '209', 21: '210', 22: '211', 23: '212', 24: '213', 25: '301', 26: '711', 27: '1006',
                28: '1007', 29: '206', 30: '207', 31: '208', 32: '304', 33: '305', 34: '508', 35: '606', 36: '701',
                37: '702', 38: '707', 39: '817', 40: '910', 41: '913', 42: '507', 43: '708', 44: '710', 45: '1011',
                46: '1012', 47: '203', 48: '204', 49: '205', 50: '302', 51: '303', 52: '609', 53: '610', 54: '611',
                55: '612', 56: '308', 57: '405', 58: '407', 59: '410', 60: '1107', 61: '505', 62: '501', 63: '605',
                64: '909', 65: '1004', 66: '604', 67: '516', 68: '408', 69: '409', 70: '310', 71: '504', 72: '820',
                73: '309', 74: '312', 75: '1003', 76: '1110', 77: '406', 78: '608', 79: '1106', 80: '808', 81: '404',
                82: '503', 83: '917', 84: '919', 85: '819', 86: '705', 87: '1105', 88: '1103', 89: '1112', 90: '402',
                91: '602', 92: '1101', 93: '401', 94: '601', 95: '921'}

json_dict1 = input_fun.open_json("20240510.json")


def process_json(json_dict):  # 删除执行中
    pop_json_dict = copy.deepcopy(json_dict)
    for i in json_dict["Order"].keys():  # 遍历工厂
        temp = []
        for j in range(len(json_dict["Order"][i])):  # 遍历各工厂对应的订单列表
            order_state = json_dict["Order"][i][j]["OrderStatus"]
            if order_state != '执行中' and order_state != '已完工':
                temp.append(json_dict["Order"][i][j])
        pop_json_dict["Order"][i] = temp
        # if pop_json_dict == json_dict:
        #     print("完全一样")
    return pop_json_dict, json_dict


json_dict = process_json(json_dict1)[0]  # 剔除执行中
all_json_dict = process_json(json_dict1)[1]  # 全部的
Old_Job_dict = input_fun.Get_New_Job_dict(json_dict)  # 未考虑合作序号的订单列表
new_job_dict = input_fun.organize_dict(Old_Job_dict)  # 考虑合作序号的订单列表
job_message = list(new_job_dict.values())
print(job_message[job2])

pt = [9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 180.0, 180.0, 9999, 9999, 180.0, 180.0, 180.0,
      180.0, 180.0, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
      9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
      9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
      9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
      9999, 9999, 9999]
pt2 = [9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
       9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
       9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
       9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999,
       9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 9999, 180.0, 180.0, 9999, 9999, 9999, 9999, 9999, 9999,
       9999, 9999]

for i in range(len(pt2)):
    if pt2[i] != 9999:
        print(i)



for i in range(5):
    try:
        print(f"Processing {i}")
        if i == 2:
            raise ValueError("An error occurred")
    except ValueError as e:
        print(e)
        # break  # 终止循环